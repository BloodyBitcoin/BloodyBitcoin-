<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>BloodyBitcoin ‚Äî GPU is the New OIL</title>
<meta name="description" content="BloodyBitcoin ‚Äî Krypto ‚Ä¢ KI ‚Ä¢ High-Performance Netzwerk" />
<script defer src="https://unpkg.com/three@0.157.0/build/three.min.js"></script>

<style>
:root{
  --bg:#070a0b; --ink:#e7f6ff; --muted:#9ab8c5;
  --neon:#20ffc0; --neon2:#39f;
  --lava:#ff8a2a; --lava2:#ffb15e;
  --card:#0b1116; --card2:#0a1216; --brd:#11313a;
  --glow-neon:0 0 18px #20ffc0,0 0 42px #20ffc033;
  --glow-lava:0 0 18px #ff8a2a,0 0 42px #ff8a2a55;
  --danger:#ff3a3a; --success:#22ff9a;
}
*{box-sizing:border-box}
html,body{margin:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
img{max-width:100%;display:block}
a{color:inherit;text-decoration:none}

/* Header */
.claim{
  position:sticky;top:0;z-index:100;
  background:linear-gradient(180deg,rgba(7,10,11,.86),rgba(7,10,11,.25));
  backdrop-filter:blur(8px);
  border-bottom:1px solid #0f1f23;
}
.claim-inner{padding:.95rem 1rem;text-align:center}
.claim h1{
  margin:0;font-weight:900;letter-spacing:.4px;
  font-size:clamp(22px,4.5vw,36px);color:#ffd8d8;
  text-shadow:0 0 16px #ff2e2e,0 0 38px #ff2e2e,0 0 64px #8b1111;
  animation:pulseRed 2.25s ease-in-out infinite;
}
@keyframes pulseRed{0%,100%{filter:drop-shadow(0 0 8px #ff3a3a)}50%{filter:drop-shadow(0 0 26px #ff3a3a)}}
.claim p{margin:.2rem 0 0;color:#f0b5b5;opacity:.9;letter-spacing:.2px}

/* Login-Button */
.login-btn{
  position:fixed;top:10px;right:12px;z-index:220;
  display:inline-grid;grid-auto-flow:column;gap:10px;align-items:center;
  padding:.7rem 1rem;border-radius:14px;font-weight:800;letter-spacing:.3px;
  color:#d8fff5;background:linear-gradient(180deg,#0f171c,#0a1216);
  border:1px solid #1b474d;box-shadow:inset 0 0 0 1px #20ffc028,0 8px 24px rgba(0,0,0,.45);
  cursor:pointer;user-select:none;
}
.login-btn .dot{width:8px;height:8px;border-radius:99px;background:#20ffc0;box-shadow:0 0 12px #20ffc0}

/* Flow Background */
.flow-bg{position:fixed;inset:0;z-index:-2;opacity:.55;pointer-events:none;
 background:radial-gradient(900px 700px at 0% 40%,#0b1a17 0,transparent 60%),radial-gradient(900px 700px at 100% 60%,#160a0f 0,transparent 60%),linear-gradient(90deg,#061214,#070a0b 50%,#0a0b0f);
 filter:saturate(1.2) contrast(1.05)}
.flow-bg::after{content:"";position:absolute;inset:-20%;background:conic-gradient(from 0deg,#0f644b33,#0b153533,#320c1e33,#0f644b33);animation:flow 28s linear infinite;mix-blend-mode:overlay;opacity:.35}
@keyframes flow{to{transform:rotate(360deg)}}

/* Hero */
.hero{position:relative;overflow:hidden;height:calc(100svh - 84px);
 background:radial-gradient(1200px 480px at 12% 12%,#081b16 0%,#081013 46%,#070a0b 100%)}
.hero img.dna{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;filter:saturate(1.15) contrast(1.05)}
.hero .overlay-grad{position:absolute;inset:0;background:linear-gradient(90deg,rgba(16,255,120,.12),rgba(255,32,48,.12));mix-blend-mode:screen}
#particles{position:absolute;inset:0;pointer-events:none}

/* DNA Fullscreen Frame */
.dna-full{position:relative;padding:18px 0 0}
.dna-full .frame{position:relative;border:1px solid #10333a;border-radius:22px;overflow:hidden;
 background:linear-gradient(180deg,#0a1418,#0a1013);box-shadow:inset 0 0 0 1px #20ffc012,0 22px 44px rgba(0,0,0,.35)}
.dna-full img{width:100%;height:62vh;object-fit:cover}
.dna-full .fx{position:absolute;inset:0;background:radial-gradient(1200px 700px at 15% 15%,rgba(32,255,192,.14),transparent 45%),radial-gradient(1000px 600px at 85% 75%,rgba(255,48,64,.12),transparent 55%);mix-blend-mode:screen}
</style>
</head>
<body>
<div class="flow-bg"></div>
<header class="claim">
 <div class="claim-inner container">
  <h1>GPU is the New OIL</h1>
  <p>Founder ‚Äî Chris R. Herloch</p>
 </div>
</header>

<button class="login-btn" id="loginBtn"><span class="dot"></span> LOGIN / ACCESS</button>

<section class="hero">
 <img class="dna" id="dnaImg" alt="Bloody Bitcoin DNA" />
 <canvas id="particles"></canvas>
 <div class="overlay-grad"></div>
</section>

<section class="section container dna-full">
 <h3>DNA Background Full</h3>
 <div class="frame">
  <img id="dnaFull" alt="Bloody Bitcoin DNA ‚Äî Fullscreen" />
  <div class="fx"></div>
 </div>
</section>
<!-- WALLET -->
<div class="wallet-wrap container">
  <a class="btn" href="#wallet">
    <span class="tube">üß™</span>
    <span>WALLET VERKN√úPFEN</span>
  </a>
</div>

<!-- PARAMETER -->
<section class="section container" id="metrics">
  <h2>Netzwerk-Parameter</h2>

  <div class="grid">
    <div class="card btc">
      <div class="label">Bitcoin (EUR)</div>
      <div class="btc-row">
        <div class="btc-logo">‚Çø</div>
        <div class="val btc-price" id="btcPrice">‚Äì</div>
      </div>
      <div class="bar" style="margin-top:14px"><i id="btcBar"></i></div>
    </div>

    <div class="card"><div class="label">Knoten</div><div class="val" id="nodes">‚Äì</div><div class="bar"><i id="nodesBar"></i></div></div>
    <div class="card"><div class="label">Leistung</div><div class="val"><span id="flops">‚Äì</span> PFLOPS</div><div class="bar"><i id="flopsBar"></i></div></div>
    <div class="card"><div class="label">Transaktionen (gesamt)</div><div class="val" id="txs">‚Äì</div><div class="bar"><i id="txsBar"></i></div></div>
    <div class="card"><div class="label">Auslastung</div><div class="val"><span id="load">‚Äì</span> %</div><div class="bar"><i id="loadBar"></i></div></div>
  </div>
</section>

<!-- GLOBE -->
<section class="section container">
  <h2>üåç Global Network Map</h2>
  <div class="globe-wrap"><canvas id="globe"></canvas></div>
</section>

<script>
/* =========================================================
   ===============  METRIKEN & BTC (EUR)  ==================
   =======================================================*/
const $ = id=>document.getElementById(id);
const setBar = (id,p)=>{const el=$(id);if(el)el.style.width=Math.max(0,Math.min(100,p))+'%';};
const rwalk=(v,s,min,max)=>Math.max(min,Math.min(max,v+(Math.random()*2-1)*s));

let nodes=160,flops=3.2,txs=11508120,load=39;
function updateFake(){
  nodes=Math.round(rwalk(nodes,3,120,260));
  flops=Math.round(rwalk(flops,.06,2.4,6.1)*100)/100;
  txs+=Math.round(Math.random()*1600);
  load=Math.round(rwalk(load,2.4,10,97));
  $('nodes').textContent=nodes.toLocaleString('de-DE');
  $('flops').textContent=flops.toLocaleString('de-DE',{minimumFractionDigits:2,maximumFractionDigits:2});
  $('txs').textContent=txs.toLocaleString('de-DE');
  $('load').textContent=load.toLocaleString('de-DE');
  setBar('nodesBar',nodes/3);
  setBar('flopsBar',(flops/6)*100);
  setBar('txsBar',((txs%1_000_000)/1_000_000)*100);
  setBar('loadBar',load);
}
setInterval(updateFake,2200);updateFake();

// BTC-Preis (EUR)
async function fetchBTC(){
 try{
  const r=await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=eur',{cache:'no-store'});
  const j=await r.json();const eur=j?.bitcoin?.eur;
  if(eur){$('btcPrice').textContent=eur.toLocaleString('de-DE',{style:'currency',currency:'EUR'});
    setBar('btcBar',35+Math.random()*60);}
 }catch(e){}
}
setInterval(fetchBTC,3500);fetchBTC();

/* =========================================================
   ===============   THREE.JS ‚Äî GLOBE 3.5 =================
   =======================================================*/
(function globe3d(){
 const host=document.getElementById('globe');
 if(!window.THREE||!host)return;
 const scene=new THREE.Scene();
 const camera=new THREE.PerspectiveCamera(55,1,0.1,100);
 camera.position.set(0,0,3.2);
 const renderer=new THREE.WebGLRenderer({canvas:host,antialias:true,alpha:true});

 function resize(){
   const w=host.clientWidth,h=host.clientHeight;
   renderer.setSize(w,h,false);
   renderer.setPixelRatio(Math.min(window.devicePixelRatio||1,2));
   camera.aspect=w/h||1;camera.updateProjectionMatrix();
 }
 scene.add(new THREE.AmbientLight(0x58ffe6,.55));
 const dl=new THREE.DirectionalLight(0x9fffe6,.75);dl.position.set(2,2,3);scene.add(dl);

 const globe=new THREE.Mesh(
   new THREE.SphereGeometry(1,64,64),
   new THREE.MeshPhongMaterial({color:0x0c332f,emissive:0x0a1614,shininess:18,transparent:true,opacity:.95})
 );
 scene.add(globe);

 // aktive St√§dte mit Puls
 const cities=[
  {n:'Frankfurt',lat:50.1,lon:8.6,a:true},
  {n:'Z√ºrich',lat:47.4,lon:8.5,a:true},
  {n:'London',lat:51.5,lon:-0.1,a:true},
  {n:'New York',lat:40.7,lon:-74,a:true},
  {n:'Singapore',lat:1.3,lon:103.8,a:true},
  {n:'Tokyo',lat:35.6,lon:139.7,a:true},
  {n:'Sydney',lat:-33.9,lon:151.2,a:false}
 ];
 function latLonToVec3(lat,lon,r=1){
   const phi=(90-lat)*Math.PI/180,theta=(lon+180)*Math.PI/180;
   return new THREE.Vector3(
     -r*Math.sin(phi)*Math.cos(theta),
      r*Math.cos(phi),
      r*Math.sin(phi)*Math.sin(theta)
   );
 }
 const pts=new THREE.Group();
 cities.forEach(c=>{
   const v=latLonToVec3(c.lat,c.lon,1.01).normalize();
   const mat=new THREE.MeshBasicMaterial({color:c.a?0x88ffe0:0xff5a5a});
   const m=new THREE.Mesh(new THREE.SphereGeometry(.045,16,16),mat);
   m.position.copy(v);m.userData=c;pts.add(m);
 });
 scene.add(pts);

 // Verbindungen zwischen aktiven
 const links=new THREE.Group();
 const active=cities.filter(c=>c.a);
 for(let i=0;i<active.length-1;i++){
   const a=active[i],b=active[(i+1)%active.length];
   const av=latLonToVec3(a.lat,a.lon,1.01),bv=latLonToVec3(b.lat,b.lon,1.01);
   const mid=av.clone().add(bv).normalize().multiplyScalar(1.25);
   const curve=new THREE.CatmullRomCurve3([av,mid,bv]);
   const tube=new THREE.TubeGeometry(curve,64,0.006,8,false);
   const mat=new THREE.MeshBasicMaterial({color:0x2cf5d2,transparent:true,opacity:.35});
   links.add(new THREE.Mesh(tube,mat));
 }
 scene.add(links);

 let t=0;
 function tick(){
   t+=0.0038;
   globe.rotation.y=t;pts.rotation.y=t*1.2;links.rotation.y=t*.9;
   pts.children.forEach((m,i)=>m.scale.setScalar(0.9+0.12*Math.sin(t*6+i)));
   links.children.forEach((ln,i)=>ln.material.opacity=.18+.18*(0.5+0.5*Math.sin(t*3+i)));
   renderer.render(scene,camera);
   requestAnimationFrame(tick);
 }
 window.addEventListener('resize',resize,{passive:true});
 resize();tick();
})();
</script>
<!-- THE BLOODY LAB -->
<section class="section container">
  <div class="lab">
    <h2>The Bloody Lab ‚öóÔ∏è</h2>
    <p style="color:#9ed8cf;max-width:70ch">
      Hochsichere KI-Module & Netzwerkdienste ‚Äì gebaut f√ºr Geschwindigkeit, Sichtbarkeit und totale Kontrolle.
      Alle Funktionen laufen isoliert, auditierbar und auf niedrige Latenzen optimiert.
      Verdiene XP, schalte Level frei und steige zum LEGEND HYPER auf. üöÄ
    </p>
    <hr class="sep" />

    <div class="lab-grid">
      <div class="lab-card">
        <span class="badge">AI Trading Sentinel</span>
        <h3>Signal Engine ‚ö°</h3>
        <p>Erkennt mikrostrukturelle Anomalien und Momentum-Regimes in Echtzeit ‚Äì bevor der Markt dreht.</p>
        <div class="lab-cta">
          <button class="btn-small">Details</button>
          <button class="btn-small primary">Enter</button>
        </div>
        <p><b>Level 10 üß† erforderlich</b></p>
      </div>

      <div class="lab-card">
        <span class="badge">Wallet Guardian</span>
        <h3>Risk Monitor üõ°Ô∏è</h3>
        <p>Wallet-Tracking mit Anomalie-Erkennung, Whitelists und Smart-Watch-Alerts in Echtzeit.</p>
        <div class="lab-cta">
          <button class="btn-small">Docs</button>
          <button class="btn-small primary">Enable</button>
        </div>
        <p><b>Level 25 üîí erforderlich</b></p>
      </div>

      <div class="lab-card">
        <span class="badge">BotForge</span>
        <h3>No-Code Bots ü§ñ</h3>
        <p>Erstelle eigene Bots f√ºr Signale, Rebalancing, Auszahlungs-Guards & Telegram-Hooks.</p>
        <div class="lab-cta">
          <button class="btn-small">Vorlagen</button>
          <button class="btn-small primary">Start</button>
        </div>
        <p><b>Level 40 ‚öôÔ∏è erforderlich</b></p>
      </div>

      <div class="lab-card">
        <span class="badge">SmartForce OS</span>
        <h3>Secure Sync üîó</h3>
        <p>Ger√§te√ºbergreifende Orchestrierung mit Zero-Trust-Konsens und Hardware-Bindung.</p>
        <div class="lab-cta">
          <button class="btn-small">Whitepaper</button>
          <button class="btn-small primary">Preview</button>
        </div>
        <p><b>Level 65 üí† erforderlich</b></p>
      </div>

      <div class="lab-card">
        <span class="badge">Neural Ops</span>
        <h3>Quantum Analyzer üß¨</h3>
        <p>Verarbeitet multi-dimensionale Datenstr√∂me und lernt selbstst√§ndig Markt-Verzerrungen.</p>
        <div class="lab-cta">
          <button class="btn-small">Run</button>
          <button class="btn-small primary">Deploy</button>
        </div>
        <p><b>Level 90 ‚ö° erforderlich</b></p>
      </div>

      <div class="lab-card">
        <span class="badge">Legacy Tier</span>
        <h3>LEGEND HYPER ü©∏</h3>
        <p>Ultimatives Access-Level ‚Äì volle KI-Autonomie, Dezentral-Governance und DNA-Code-Forge.</p>
        <div class="lab-cta">
          <button class="btn-small">Access</button>
          <button class="btn-small primary">Ascend</button>
        </div>
        <p><b>Erfordert Legend Hyper Status üëë</b></p>
      </div>
    </div>

    <hr class="sep" />

    <div style="color:#9ed8cf;max-width:70ch;font-size:.95rem;line-height:1.6">
      <b>XP & Level-System üìà</b><br>
      <span style="color:#20ffc0">XP verdienen:</span> durch Aktivit√§t im Netzwerk, Node-Betrieb, Bot-Einsatz und Entdeckungen im Lab.<br>
      <span style="color:#ff8a2a">Rangaufstieg:</span> je mehr XP, desto h√∂her dein Level ‚Äì bis zum LEGEND HYPER ü©∏-Status.<br>
      <i>Nur Legenden sehen alles ‚Äì nur Hyper beherrschen das System.</i>
    </div>
  </div>
</section>

<!-- SOUND-BUTTON -->
<button class="sound" id="soundBtn" aria-label="Sound umschalten">üîä</button>

<!-- FOOTER -->
<footer>
  <img id="sealImg" alt="Bloody Bitcoin Seal" />
  <p class="tagline">FORGED IN THE BLOOD OF BITCOIN</p>
  <p>¬© BLOODYBITCOIN ‚Äî GPU IS THE NEW OIL</p>

  <!-- LOGIN-BEREICH unter Spruch -->
  <div style="margin-top:24px">
    <button class="login-btn" id="loginBtn2"><span class="dot"></span> LOGIN / ACCESS</button>
  </div>
</footer>

<!-- LOGIN-MODAL -->
<div class="modal" id="loginModal" role="dialog" aria-modal="true" aria-labelledby="loginTitle">
  <div class="modal-card">
    <h3 id="loginTitle">Secure Access Portal üîê</h3>
    <p>Beta-Zugang ‚Äì melde dich an, um private Endpunkte & Dashboards zu sehen.</p>
    <div class="modal-row">
      <input class="input" type="text" placeholder="Username" />
      <input class="input" type="password" placeholder="Passphrase" />
    </div>
    <div class="modal-actions">
      <button class="btn-small" id="loginClose">Schlie√üen</button>
      <button class="btn-small primary">Login</button>
    </div>
  </div>
</div>
<!-- =======================================================
     TEIL 4 / 4 ‚Äî FINAL SCRIPTS
======================================================== -->

<script>
/* =========================================================
   ===============  ROBUSTE ASSET-ERKENNUNG  ===============
   =======================================================*/
const BASES = ['./', './docs/'];
const DNA_CANDIDATES  = [
  '0E7B2C5C-6150-41B3-AB1B-85F5CB78D5C1.png',
  '0E7B2C5C-6150-41B3-AB1B-85F5CB78D5C1.jpeg',
  '0E7B2C5C-6150-41B3-AB1B-85F5CB78D5C1.jpg'
];
const DNAFULL_CANDIDATES = [
  '6D678E9C-E782-4914-B721-E25D4D198C88.jpeg',
  '6D678E9C-E782-4914-B721-E25D4D198C88.jpg',
  '0E7B2C5C-6150-41B3-AB1B-85F5CB78D5C1.png'
];
const SEAL_CANDIDATES = ['IMG_7712.jpeg','IMG_7712.jpg','IMG_7712.png'];

function probeImage(url){
  return new Promise(res=>{
    const im=new Image();
    im.onload = ()=>res(url);
    im.onerror= ()=>res(null);
    im.src = url + (url.includes('?')?'&':'?') + 'v=' + Date.now();
  });
}
async function resolveAsset(cands){
  for(const base of BASES){
    for(const name of cands){
      const hit = await probeImage(base+name);
      if(hit) return hit;
    }
  }
  return null;
}
(async function mountAssets(){
  const dnaSmall = await resolveAsset(DNA_CANDIDATES);
  const dnaFull  = await resolveAsset(DNAFULL_CANDIDATES);
  const seal     = await resolveAsset(SEAL_CANDIDATES);
  const $ = (id)=>document.getElementById(id);
  if(dnaSmall && $('dnaImg'))  $('dnaImg').src  = dnaSmall;
  if(dnaFull  && $('dnaFull')) $('dnaFull').src = dnaFull;
  if(seal     && $('sealImg')) $('sealImg').src = seal;
})();
</script>

<script>
/* =========================================================
   ===============   PARTIKEL √ºber dem HERO   ==============
   =======================================================*/
(function particles(){
  const cvs = document.getElementById('particles');
  if(!cvs) return;
  const ctx = cvs.getContext('2d');
  let W=0,H=0, P=[];

  function resize(){
    const hero = document.querySelector('.hero');
    W = cvs.width  = hero.clientWidth;
    H = cvs.height = hero.clientHeight;
  }
  function spawn(n=110){
    P = Array.from({length:n}, ()=>({
      x:Math.random()*W, y:Math.random()*H,
      r: 2+Math.random()*4,
      vx:(Math.random()-.5)*.6, vy:(Math.random()-.5)*.6,
      c: Math.random()<.5 ? 'rgba(32,255,160,.70)' : 'rgba(255,48,64,.65)'
    }));
  }
  function loop(){
    ctx.clearRect(0,0,W,H);
    for(const p of P){
      p.x+=p.vx; p.y+=p.vy;
      if(p.x<-12) p.x=W+12; if(p.x>W+12) p.x=-12;
      if(p.y<-12) p.y=H+12; if(p.y>H+12) p.y=-12;
      const g=ctx.createRadialGradient(p.x,p.y,0,p.x,p.y,p.r*3);
      g.addColorStop(0,p.c); g.addColorStop(1,'transparent');
      ctx.fillStyle=g; ctx.beginPath(); ctx.arc(p.x,p.y,p.r*3,0,Math.PI*2); ctx.fill();
    }
    requestAnimationFrame(loop);
  }
  window.addEventListener('resize', ()=>{ resize(); spawn(110); });
  resize(); spawn(110); loop();
})();
</script>

<script>
/* =========================================================
   ===============  METRIKEN & BTC (EUR)  ==================
   =======================================================*/
const $id = id=>document.getElementById(id);
const setBar = (id,p)=>{ const el=$id(id); if(el) el.style.width=Math.max(0,Math.min(100,p))+'%'; };
const rwalk = (v,s,min,max)=> Math.max(min, Math.min(max, v + (Math.random()*2-1)*s));

let nodes=160, flops=3.2, txs=11_508_120, load=39;
function updateFake(){
  nodes=Math.round(rwalk(nodes,3,120,260));
  flops=Math.round(rwalk(flops,.06,2.4,6.1)*100)/100;
  txs += Math.round(Math.random()*1600);
  load=Math.round(rwalk(load,2.4,10,97));
  if($id('nodes')) $id('nodes').textContent = nodes.toLocaleString('de-DE');
  if($id('flops')) $id('flops').textContent = flops.toLocaleString('de-DE',{minimumFractionDigits:2, maximumFractionDigits:2});
  if($id('txs'))   $id('txs').textContent   = txs.toLocaleString('de-DE');
  if($id('load'))  $id('load').textContent  = load.toLocaleString('de-DE');
  setBar('nodesBar', nodes/3);
  setBar('flopsBar', (flops/6)*100);
  setBar('txsBar',   ((txs%1_000_000)/1_000_000)*100);
  setBar('loadBar',  load);
}
setInterval(updateFake, 2200); updateFake();

// BTC in EUR
async function fetchBTC(){
  try{
    const r = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=eur',{cache:'no-store'});
    const j = await r.json();
    const eur = j?.bitcoin?.eur;
    if(eur && $id('btcPrice')){
      $id('btcPrice').textContent = eur.toLocaleString('de-DE',{style:'currency', currency:'EUR'});
      setBar('btcBar', 35 + Math.random()*60);
    }
  }catch(e){ /* still leise */ }
}
setInterval(fetchBTC, 3500); fetchBTC();
</script>

<script>
/* =========================================================
   ===============   THREE.JS ‚Äî GLOBE v2.0   ===============
   =======================================================*/
(function globe3d(){
  const host = document.getElementById('globe');
  if(!window.THREE || !host) return;

  const scene   = new THREE.Scene();
  const camera  = new THREE.PerspectiveCamera(55, 1, 0.1, 100);
  camera.position.set(0, 0, 3.2);

  const renderer = new THREE.WebGLRenderer({canvas:host, antialias:true, alpha:true});
  function resize(){
    const w=host.clientWidth, h=host.clientHeight;
    renderer.setSize(w,h,false);
    renderer.setPixelRatio(Math.min(window.devicePixelRatio||1, 2));
    camera.aspect = w/h || 1; camera.updateProjectionMatrix();
  }
  host.style.background='radial-gradient(480px 280px at 45% 35%, rgba(32,255,192,.08), transparent 65%)';

  // Licht
  scene.add(new THREE.AmbientLight(0x58ffe6, .55));
  const dl = new THREE.DirectionalLight(0x9fffe6, .75); dl.position.set(2,2,3); scene.add(dl);

  // Kugel (dunkelgr√ºn-glassig)
  const globe = new THREE.Mesh(
    new THREE.SphereGeometry(1, 64, 64),
    new THREE.MeshPhongMaterial({color:0x0c332f, emissive:0x0a1614, shininess:18, transparent:true, opacity:.95})
  );
  scene.add(globe);

  // St√§dte (aktive = neon-gr√ºn, inaktive = lava-orange)
  const cities = [
    {name:'Frankfurt', lat:50.1, lon:8.6,  active:true},
    {name:'Z√ºrich',    lat:47.4, lon:8.5,  active:true},
    {name:'London',    lat:51.5, lon:-0.1, active:true},
    {name:'New York',  lat:40.7, lon:-74,  active:true},
    {name:'S√£o Paulo', lat:-23.5,lon:-46.6,active:false},
    {name:'Singapur',  lat:1.3,  lon:103.8,active:true},
    {name:'Tokio',     lat:35.6, lon:139.7,active:true},
    {name:'Sydney',    lat:-33.9,lon:151.2,active:false},
  ];
  function latLonToVec3(lat,lon,r=1){
    const phi = (90 - lat) * Math.PI/180;
    const theta = (lon + 180) * Math.PI/180;
    return new THREE.Vector3(
      -r * Math.sin(phi) * Math.cos(theta),
      r  * Math.cos(phi),
      r  * Math.sin(phi) * Math.sin(theta)
    );
  }

  // Marker
  const pts = new THREE.Group();
  cities.forEach(c=>{
    const v = latLonToVec3(c.lat,c.lon,1.01).normalize();
    const s = .045;
    const col = c.active ? 0x88ffe0 : 0xff8a2a; // gr√ºn(neon) / lava
    const m = new THREE.Mesh(new THREE.SphereGeometry(s,16,16), new THREE.MeshBasicMaterial({color: col}));
    m.position.copy(v);
    m.userData = c;
    pts.add(m);
  });
  scene.add(pts);

  // Verbindungen (neon-gr√ºn zwischen aktiven)
  const links = new THREE.Group();
  const activeCities = cities.filter(c=>c.active);
  for(let i=0;i<activeCities.length-1;i++){
    const a=activeCities[i], b=activeCities[(i+1)%activeCities.length];
    const av=latLonToVec3(a.lat,a.lon,1.01), bv=latLonToVec3(b.lat,b.lon,1.01);
    const mid = av.clone().add(bv).normalize().multiplyScalar(1.25);
    const curve = new THREE.CatmullRomCurve3([av, mid, bv]);
    const tube = new THREE.TubeGeometry(curve, 64, 0.006, 8, false);
    const mat  = new THREE.MeshBasicMaterial({color:0x20ffc0, transparent:true, opacity:.35});
    const mesh = new THREE.Mesh(tube, mat);
    links.add(mesh);
  }
  scene.add(links);

  // Orbits (neon-gr√ºn)
  const orbits = new THREE.Group();
  [0, Math.PI/3, -Math.PI/3].forEach(rot=>{
    const ring = new THREE.Mesh(
      new THREE.RingGeometry(0.99, 1.0, 128),
      new THREE.MeshBasicMaterial({color:0x20ffc0, transparent:true, opacity:.18, side:THREE.DoubleSide})
    );
    ring.rotation.y = rot;
    orbits.add(ring);
  });
  scene.add(orbits);

  // Tooltip
  host.title = 'Active nodes: ' + activeCities.map(c=>c.name).join(', ');

  // Anim
  let t=0;
  function tick(){
    t += 0.0038;
    globe.rotation.y = t;
    pts.rotation.y   = t*1.2;
    links.rotation.y = t*.9;
    orbits.rotation.y= t*.9;

    // Puls der Marker
    pts.children.forEach((m,i)=>{
      const pulse = 0.9 + 0.12*Math.sin(t*6 + i);
      m.scale.setScalar(pulse);
    });
    // Schimmer der Links
    links.children.forEach((ln,i)=>{
      ln.material.opacity = .16 + .18 * (0.5+0.5*Math.sin(t*3 + i));
    });

    renderer.render(scene,camera);
    requestAnimationFrame(tick);
  }

  window.addEventListener('resize', resize, {passive:true});
  resize(); tick();
})();
</script>

<script>
/* =========================================================
   ============  DUNKLER BRUMM-SOUND (Scroll)  =============
   =======================================================*/
(function sound(){
  let ctx, osc1, osc2, gain, on=false, lastY=window.scrollY;
  const btn = document.getElementById('soundBtn');
  function setup(){
    ctx = new (window.AudioContext||window.webkitAudioContext)();
    osc1 = ctx.createOscillator(); osc1.type='sawtooth'; osc1.frequency.value = 44;
    osc2 = ctx.createOscillator(); osc2.type='sine';     osc2.frequency.value = 22;
    gain = ctx.createGain();       gain.gain.value = 0.015;
    osc1.connect(gain); osc2.connect(gain); gain.connect(ctx.destination);
    osc1.start(); osc2.start();
  }
  function react(){
    if(!on || !ctx) return;
    const y=window.scrollY; const dy=Math.abs(y-lastY); lastY=y;
    const f = 38 + Math.min(140, dy*0.9);
    const f2= 18 + Math.min(90,  dy*0.6);
    osc1.frequency.exponentialRampToValueAtTime(f,  ctx.currentTime+.10);
    osc2.frequency.exponentialRampToValueAtTime(f2, ctx.currentTime+.10);
    const g = 0.012 + Math.min(.06, dy/1200);
    gain.gain.linearRampToValueAtTime(g, ctx.currentTime+.10);
  }
  if(btn){
    btn.addEventListener('click', async ()=>{
      if(!on){
        if(!ctx) setup();
        if(ctx.state==='suspended') await ctx.resume();
        on=true; btn.textContent='üîä';
      }else{
        on=false; btn.textContent='üîà';
        if(ctx) ctx.suspend();
      }
    }, {passive:true});
    window.addEventListener('scroll', react, {passive:true});
  }
})();
</script>

<script>
/* =========================================================
   ==================== LOGIN-MODAL UX =====================
   =======================================================*/
(function loginModal(){
  const modal = document.getElementById('loginModal');
  const open1 = document.getElementById('loginBtn');   // oben fix
  const open2 = document.getElementById('loginBtn2');  // unten im Footer
  const close = document.getElementById('loginClose');
  if(!modal) return;
  function open(){ modal.classList.add('show'); }
  function hide(){ modal.classList.remove('show'); }
  if(open1) open1.addEventListener('click', open);
  if(open2) open2.addEventListener('click', open);
  if(close) close.addEventListener('click', hide);
  modal.addEventListener('click', (e)=>{ if(e.target===modal) hide(); });
})();
</script>

<script>
/* =========================================================
   ============  HEADER-POLISH + PAGE FADE-IN  =============
   =======================================================*/
(function headerPolish(){
  const h = document.querySelector('.claim');
  if(!h) return;
  window.addEventListener('scroll', ()=>{
    const y = window.scrollY||0;
    h.style.backdropFilter = `blur(${6 + Math.min(6, y/160)}px)`;
    h.style.opacity = String(1 - Math.min(.14, y/240));
  }, {passive:true});
})();
document.body.style.opacity=0;
window.addEventListener('load', ()=>{
  document.body.style.transition='opacity .42s ease';
  document.body.style.opacity=1;
});
</script>

<script>
/* =========================================================
   =========  Canvas/IMG Performance & Lazy Loading  =======
   =======================================================*/
document.querySelectorAll('canvas').forEach(cv=>{
  cv.style.willChange='transform';
  cv.style.imageRendering='auto';
});
if('requestIdleCallback' in window){
  requestIdleCallback(()=>{
    [...document.images].forEach(im=>{ if(!im.loading) im.loading='lazy'; });
  });
}
</script>
<!-- ===================== ENDE TEIL 4 / 4 ===================== -->
